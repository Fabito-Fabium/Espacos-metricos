%%%% utfpr-article.sty, 2023/10/10 v1.5
%%%% Copyright (C) 2016-2023 Luiz E. M. Lima (luizeduardomlima@gmail.com)
%%
%% This work may be distributed and/or modified under the conditions of the
%% LaTeX Project Public License, either version 1.3 of this license or (at your
%% option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX version
%% 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%%
%% The Current Maintainer of this work is Luiz E. M. Lima.
%%
%% This work consists of all files listed in readme.html.
%%
%% A brief description of this work is in readme.txt.

%% Identificação e atualizações
\NeedsTeXFormat{LaTeX2e}[2005/12/01]
\ProvidesPackage{utfpr-article}[2023/10/10 v1.5 utfpr-article package]
%%%% Alteração de alguns pacotes, comandos, formatações e tipografias.
% \ProvidesPackage{utfpr-article}[2023/06/08 v1.4 utfpr-article package]
%%%% Alteração de alguns pacotes, comandos, formatações e tipografias.
% \ProvidesPackage{utfpr-article}[2023/04/20 v1.3 utfpr-article package]
%%%% Alteração de alguns pacotes, comandos, formatações e tipografias.
%%%% Alteração dos arquivos constituintes para uso em eventos (SEI-SICITE, etc.).
% \ProvidesPackage{utfpr-article}[2019/12/05 v1.2 utfpr-article package]
%%%% Alteração de alguns pacotes, comandos, formatações e tipografias.
%%%% Alteração de nomes dos arquivos (utfprpgtex-article --> utfpr-article).
%%%% Inserção de opção para uso do estilo numérico da ABNT.
% \ProvidesPackage{utfprpgtex-article}[2019/02/20 v1.1 utfprpgtex-article package]
%%%% Alteração de alguns pacotes, comandos, formatações e tipografias.
%%%% Alteração de bibtex para biber (biblatex) na produção de citações e referências.
% \ProvidesPackage{utfprpgtex-article}[2016/03/01 v1.0 utfprpgtex-article package]
%%%% Criação dos arquivos constituintes.

%% Opções do pacote (^ = padrão; ¹ = Leiaute A; ² = Leiaute B)
\RequirePackage{xpatch}
%%%% Leiaute (margens): A (esquerda menor + recuo) ou B (iguais) (^)
\newbool{@LayoutA}
\DeclareOption{Layout=A}{%
  \booltrue{@LayoutA}%
  \ExecuteOptions{%
    Font      = Calibri,%
    RuleWidth = Paper,%
    SectNum   = Off,%
    SectUnnum = Center,%
  }%
}
\DeclareOption{Layout=B}{%
  \boolfalse{@LayoutA}%
  \ExecuteOptions{%
    Font      = Arial,%
    RuleWidth = Zero,%
    SectNum   = On,%
    SectUnnum = Left,%
  }%
}
%%%% Fonte principal: Arial (²), Calibri (¹), Times ou LaTeX
\newbool{@FontArial}
\newbool{@FontCalibri}
\newbool{@FontTimes}
\DeclareOption{Font=Arial}{%
  \booltrue{@FontArial}%
  \boolfalse{@FontCalibri}%
  \boolfalse{@FontTimes}%
}
\DeclareOption{Font=Calibri}{%
  \boolfalse{@FontArial}%
  \booltrue{@FontCalibri}%
  \boolfalse{@FontTimes}%
}
\DeclareOption{Font=Times}{%
  \boolfalse{@FontArial}%
  \boolfalse{@FontCalibri}%
  \booltrue{@FontTimes}%
}
\DeclareOption{Font=LaTeX}{%
  \boolfalse{@FontArial}%
  \boolfalse{@FontCalibri}%
  \boolfalse{@FontTimes}%
}
%%%% Largura de linha (cabeçalho e rodapé): Zero (²), Text ou Paper (¹)
\newbool{@RuleWidthZero}
\newbool{@RuleWidthText}
\DeclareOption{RuleWidth=Zero}{%
  \booltrue{@RuleWidthZero}%
  \boolfalse{@RuleWidthText}%
}
\DeclareOption{RuleWidth=Text}{%
  \boolfalse{@RuleWidthZero}%
  \booltrue{@RuleWidthText}%
}
\DeclareOption{RuleWidth=Paper}{%
  \boolfalse{@RuleWidthZero}%
  \boolfalse{@RuleWidthText}%
}
%%%% Ícones de e-mail, Lattes, ORCID e Instituição: On (^) ou Off
\newbool{@AffilIconOn}
\DeclareOption{AffilIcon=On}{\booltrue{@AffilIconOn}}
\DeclareOption{AffilIcon=Off}{\boolfalse{@AffilIconOn}}
%%%% Licença do documento: CC (Creative Commons) (^) ou None
\newbool{@DocLicCC}
\newbool{@DocLicCCStd}
\DeclareOption{DocLic=CC}{%
  \booltrue{@DocLicCC}%
  \boolfalse{@DocLicCCStd}%
}
\DeclareOption{DocLic=CC*}{%
  \boolfalse{@DocLicCC}%
  \booltrue{@DocLicCCStd}%
}
\DeclareOption{DocLic=None}{%
  \boolfalse{@DocLicCC}%
  \boolfalse{@DocLicCCStd}%
}
%%%% Licença CC: BY (^), BY-SA, BY-ND, BY-NC, BY-NC-SA ou BY-NC-ND
\newbool{@CCLicSA}
\newbool{@CCLicND}
\newbool{@CCLicNC}
\DeclareOption{CCLic=BY}{%
  \boolfalse{@CCLicSA}%
  \boolfalse{@CCLicND}%
  \boolfalse{@CCLicNC}%
}
\DeclareOption{CCLic=BY-SA}{\booltrue{@CCLicSA}}
\DeclareOption{CCLic=BY-ND}{\booltrue{@CCLicND}}
\DeclareOption{CCLic=BY-NC}{\booltrue{@CCLicNC}}
\DeclareOption{CCLic=BY-NC-SA}{\ExecuteOptions{CCLic = BY-NC, CCLic = BY-SA}}
\DeclareOption{CCLic=BY-NC-ND}{\ExecuteOptions{CCLic = BY-NC, CCLic = BY-ND}}
%%%% Cor de hyperlinks: DarkBlue (^) ou TextColor
\newbool{@LinkDarkBlue}
\DeclareOption{Link=DarkBlue}{\booltrue{@LinkDarkBlue}}
\DeclareOption{Link=TextColor}{\boolfalse{@LinkDarkBlue}}
%%%% Numeração de páginas: On (^) ou Off
\newbool{@PageNumOn}
\DeclareOption{PageNum=On}{\booltrue{@PageNumOn}}
\DeclareOption{PageNum=Off}{\boolfalse{@PageNumOn}}
%%%% Numeração de seções (\section): On (²) ou Off (¹)
\newbool{@SectNumOn}
\DeclareOption{SectNum=On}{\booltrue{@SectNumOn}}
\DeclareOption{SectNum=Off}{\boolfalse{@SectNumOn}}
%%%% Alinhamento de seções (\section*): Center (¹) ou Left (²)
\newbool{@SectUnnumLeft}
\DeclareOption{SectUnnum=Left}{\booltrue{@SectUnnumLeft}}
\DeclareOption{SectUnnum=Center}{\boolfalse{@SectUnnumLeft}}
%%%% Alinhamento de legendas: Center (^) ou Left
\newbool{@CaptionLeft}
\DeclareOption{Caption=Left}{\booltrue{@CaptionLeft}}
\DeclareOption{Caption=Center}{\boolfalse{@CaptionLeft}}
%%%% Alinhamento de fonte (referência): Center (^) ou Left
\newbool{@SourceLeft}
\DeclareOption{Source=Left}{\booltrue{@SourceLeft}}
\DeclareOption{Source=Center}{\boolfalse{@SourceLeft}}
%%%% Citação ABNT: AAY (NOME, ANO) (^), NRB (1) ou NSB [1]
\newbool{@ABNTCitNRB}
\newbool{@ABNTCitNSB}
\DeclareOption{ABNTCit=AAY}{%
  \boolfalse{@ABNTCitNRB}%
  \boolfalse{@ABNTCitNSB}%
}
\DeclareOption{ABNTCit=NRB}{%
  \booltrue{@ABNTCitNRB}%
  \boolfalse{@ABNTCitNSB}%
}
\DeclareOption{ABNTCit=NSB}{%
  \booltrue{@ABNTCitNRB}%
  \booltrue{@ABNTCitNSB}%
}
%%%% Ícone de DOI em referências: Icon ou Name (^)
\newbool{@BibDOIIcon}
\DeclareOption{BibDOI=Icon}{\booltrue{@BibDOIIcon}}
\DeclareOption{BibDOI=Name}{\boolfalse{@BibDOIIcon}}
%%%% Ícone de URL em referências: Icon ou URL (^)
\newbool{@BibURLIcon}
\DeclareOption{BibURL=Icon}{\booltrue{@BibURLIcon}}
\DeclareOption{BibURL=URL}{\boolfalse{@BibURLIcon}}
%%%% Aviso de indisponíveis, execução de padrões e processamento de atribuídas
\DeclareOption*{\PackageWarning{utfpr-article}{Unknown option `\CurrentOption'}}
\ExecuteOptions{%
  Layout    = B,%
  AffilIcon = On,%
  DocLic    = CC*,%
  CCLic     = BY,%
  Link      = DarkBlue,%
  PageNum   = On,%
  Caption   = Center,%
  Source    = Center,%
  ABNTCit   = AAY,%
  BibDOI    = Name,%
  BibURL    = URL,%
}
\ProcessOptions\relax%

%% Pacotes utilizados
\RequirePackage{ifdraft}
\RequirePackage{iftex}
\RequirePackage{babel}
\ifboolexpr{ bool {LuaTeX} or bool {XeTeX} }{%
  \RequirePackage{fontspec}%
  \RequirePackage{amsmath}%
  \RequirePackage[bold-style = ISO]{unicode-math}%
  \defaultfontfeatures{Ligatures = TeX}%
  \ifboolexpr{ bool {@FontArial} or bool {@FontTimes} }{%
    \setmainfont{TeX Gyre Termes}%
    \setsansfont{TeX Gyre Heros}[\ifbool{@FontTimes}{Scale = 0.9}{}]%
    \setmathfont{TeX Gyre Termes Math}%
    \setmathfont{TeX Gyre Termes Math}[version = bold]%
  }{}%
}{%
  \RequirePackage[utf8]{inputenc}%
  \RequirePackage[T1]{fontenc}%
  \RequirePackage{lmodern}%
  \ifboolexpr{ bool {@FontArial} or bool {@FontTimes} }{%
    \RequirePackage[\ifbool{@FontArial}{helvratio = 1}{}]{newtxtext}%
    \RequirePackage[smallerops]{newtxmath}%
  }{%
    \RequirePackage{amsmath}%
    \RequirePackage{textcomp}%
  }%
}
\ifbool{@FontCalibri}{\RequirePackage[sfdefault, lining, tabular]{carlito}}{}
\RequirePackage{fontawesome5}
\RequirePackage{microtype}
\RequirePackage{ragged2e}
\RequirePackage[overload]{textcase}
\RequirePackage{csquotes}
\RequirePackage{lipsum}
\@ifpackageloaded{xcolor}{%
  \@ifpackagewith{xcolor}{table, xcdraw}{}{\RequirePackage[table, xcdraw]{xcolor}}%
}{%
  \RequirePackage[table, xcdraw]{xcolor}%
}
\RequirePackage[\ifdraft{showframe}{}]{geometry}
\RequirePackage{scrextend}
\RequirePackage{indentfirst}
\RequirePackage{fancyhdr}
\RequirePackage[bottom, hang]{footmisc}
\RequirePackage{enumitem}
\RequirePackage{environ}
\RequirePackage{icomma}
\RequirePackage{newfloat}
\RequirePackage[content = {\faFileImage}, position = {center}]{draftfigure}
\RequirePackage{eso-pic}
\RequirePackage{graphicx}
\RequirePackage{booktabs}
\RequirePackage{tabularx}
\RequirePackage{caption}
\RequirePackage[%
  style        = abnt\ifbool{@ABNTCitNRB}{-numeric}{},%
  natbib       = true,%
  sorting      = \ifbool{@ABNTCitNRB}{none}{nty},%
  uniquename   = minfull,%
  extradate    = true,%
  repeatfields = true,%
  \ifbool{@ABNTCitNRB}{comp = true,}{}%
]{biblatex}
\RequirePackage[hyphens]{xurl}
\RequirePackage{hyperref}
\RequirePackage[capitalise, nameinlink]{cleveref}

%% Configuração do pacote microtype
\@ifpackagelater{microtype}{2021/10/31}{\microtypesetup{nopatch = {eqnum,footnote}}}{}

%% Fontes
\ifbool{@FontArial}{\renewcommand*{\familydefault}{\sfdefault}}{}
\newcommand*{\VIIptFS}{\fontsize{7}{9}\selectfont}
\newcommand*{\IXptFS}{\fontsize{9}{11}\selectfont}
\newcommand*{\XVptFS}{\fontsize{12}{17}\selectfont}
\csletcs{old@ttfamily}{ttfamily}
\renewrobustcmd*{\ttfamily}{\old@ttfamily\hyphenchar\font=`\-\relax}
\csletcs{Old@TeX}{TeX}
\csletcs{Old@LaTeX}{LaTeX}
\AtBeginDocument{%
  \renewrobustcmd*{\TeX}{{\fontfamily{lmr}\selectfont\protect\Old@TeX}}%
  \renewrobustcmd*{\LaTeX}{{\fontfamily{lmr}\selectfont\Old@LaTeX}}%
}
\newrobustcmd*{\UTFPR}{UTF{\tiny\kern-0.1em\hbox{PR}}}

%% Cores
\definecolor{UTFPRBlack}{cmyk}{0, 0, 0, 1}
\definecolor{UTFPRYellow}{cmyk}{0, 0.2, 1, 0}
\definecolor{ADarkBlue}{RGB}{0, 0, 51}
\definecolor{AGray}{RGB}{153, 153, 153}
\@ifundefinedcolor{TextColor}{%
  \colorlet{LinkColor}{\ifbool{@LinkDarkBlue}{ADarkBlue}{.}}%
}{%
  \colorlet{LinkColor}{\ifbool{@LinkDarkBlue}{ADarkBlue!25!TextColor}{TextColor}}%
  \color{TextColor}%
}
\@ifundefinedcolor{EmphColor}{%
  \colorlet{DocColor}{.}%
  \colorlet{TableColor}{gray}%
}{%
  \colorlet{DocColor}{EmphColor}%
  \colorlet{TableColor}{EmphColor}%
}

%% Hiperlinks e URLs
\hypersetup{%
  breaklinks         = true,%
  colorlinks         = true,%
  allcolors          = LinkColor,%
  bookmarksnumbered  = true,%
  pdfdisplaydoctitle = true,%
  pdfencoding        = unicode,%
}
\pdfstringdefDisableCommands{%
  \csletcs{MakeUppercase}{@firstofone}%
  \renewcommand*{\\}{ }%
}
\DeclareUrlCommand{\URL}{%
  \renewcommand*{\UrlFont}{\color{LinkColor}\ttfamily}%
  \renewcommand*{\UrlLeft}{<}%
  \renewcommand*{\UrlRight}{>}%
}
\csgappto{UrlBreaks}{\UrlOrds}
\csgappto{UrlSpecials}{\do\_{\_\penalty\UrlBreakPenalty}}

%% Variáveis dependentes do idioma
\newcommand*{\SectAutoRefName}[1]{\csletcs{#1autorefname}{Cref@section@name}}
\newcommand*{\MECName}{Ministério da Educação}
\newcommand*{\UTFPRName}{Universidade Tecnológica Federal do Paraná}
\newcommand*{\BRName}{Brasil}
\newcommand*{\CityCall}{Cidade}
\newcommand*{\InstDeptEx}{Departamento, Coordenação, Programa ou Curso}
\newcommand*{\FullNameCall}{Nome Completo do{(a)} Autor{(a)}}
\newcommand*{\KWCall}{Palavras-chave}
\newcommand*{\RcvdCall}{Recebido}
\newcommand*{\AppdCall}{Aprovado}
\newcommand*{\CCLicCall}{Direito autoral}
\newcommand*{\CCLicDescr}{%
  \ifbool{@LayoutA}{%
    Este artigo está licenciado sob uma Licença %
    \href{\CCLicURL}{%
      Cre\-ative Com\-mons Atribuição%
      \ifbool{@CCLicNC}{\csuse{textendash}Não\-Co\-mer\-cial}{}%
      \ifbool{@CCLicND}{\csuse{textendash}Sem\-De\-ri\-va\-ções}{}%
      \ifbool{@CCLicSA}{\csuse{textendash}Com\-par\-ti\-lha\-Igual}{} %
      4.0 Internacional%
    }.%
  }
}
\newcommand*{\HdrWrng}{Inserir Cabeçalho\\(\LengthTo*{cm}{\HFRuleWd}~cm \texttimes\ \LengthTo*{cm}{\TopLine}~cm)}
\newcommand*{\LogoWrng}{Inserir Logo}
\newcommand*{\SDGStmpWrng}{Inserir Selo ODS}
\newcommand*{\SrcCall}{Fonte}
\newcommand*{\TtlPgName}{Página de Título}
\newcommand*{\AcronymsListName}{Lista de Abreviaturas e Siglas}
\newcommand*{\SymbolsListName}{Lista de Símbolos}
\newcommand*{\flowchartname}{Fluxograma}
\newcommand*{\photographname}{Fotografia}
\newcommand*{\graphname}{Gráfico}
\newcommand*{\tabframedname}{Quadro}
\renewcommand*{\listfigurename}{Lista de Ilustrações}
\Crefname{flowchart}{Fluxograma}{Fluxogramas}
\crefname{flowchart}{Flux.}{Fluxs.}
\Crefname{photograph}{Fotografia}{Fotografias}
\crefname{photograph}{Fot.}{Fots.}
\Crefname{graph}{Gráfico}{Gráficos}
\crefname{graph}{Gráf.}{Gráfs.}
\Crefname{tabframed}{Quadro}{Quadros}
\crefname{tabframed}{Quad.}{Quads.}
\Crefname{annex}{Anexo}{Anexos}
\crefname{annex}{Anexo}{Anexos}
\forcsvlist{\SectAutoRefName}{section, subsection, subsubsection, paragraph, subparagraph}
%%%% Definições em Português
\csappto{extrasbrazilian}{%
  \renewcommand*{\MECName}{Ministério da Educação}%
  \renewcommand*{\UTFPRName}{Universidade Tecnológica Federal do Paraná}%
  \renewcommand*{\BRName}{Brasil}%
  \renewcommand*{\CityCall}{Cidade}%
  \renewcommand*{\InstDeptEx}{Departamento, Coordenação, Programa ou Curso}%
  \renewcommand*{\FullNameCall}{Nome Completo do{(a)} Autor{(a)}}%
  \renewcommand*{\KWCall}{Palavras-chave}%
  \renewcommand*{\RcvdCall}{Recebido}%
  \renewcommand*{\AppdCall}{Aprovado}%
  \renewcommand*{\CCLicCall}{Direito autoral}%
  \renewcommand*{\CCLicDescr}{%
    \ifbool{@LayoutA}{%
      Este artigo está licenciado sob uma Licença %
      \href{\CCLicURL}{%
        Cre\-ative Com\-mons Atribuição%
        \ifbool{@CCLicNC}{\csuse{textendash}Não\-Co\-mer\-cial}{}%
        \ifbool{@CCLicND}{\csuse{textendash}Sem\-De\-ri\-va\-ções}{}%
        \ifbool{@CCLicSA}{\csuse{textendash}Com\-par\-ti\-lha\-Igual}{} %
        4.0 Internacional%
      }.%
    }{%
      Este é um documento de acesso aberto sob os termos da Licença %
      \href{\CCLicURL}{%
        Cre\-ative Com\-mons Atribuição%
        \ifbool{@CCLicNC}{\csuse{textendash}Não\-Co\-mer\-cial}{}%
        \ifbool{@CCLicND}{\csuse{textendash}Sem\-De\-ri\-va\-ções}{}%
        \ifbool{@CCLicSA}{\csuse{textendash}Com\-par\-ti\-lha\-Igual}{}%
        \ifbool{@DocLicCC}{ (CC BY\MakeUppercase{\CCLicAcr{-}})}{} %
        4.0 Internacional%
      }, %
      que permite uso e distribuição em qualquer meio ou formato, %
      desde que o trabalho original seja devidamente citado%
      \ifbool{@CCLicNC}{\ifboolexpr{ bool {@CCLicND} or bool {@CCLicSA} }{,}{ e} o uso não seja comercial}{}%
      \ifbool{@CCLicND}{ e nenhuma modificação ou adaptação seja feita}{}%
      \ifbool{@CCLicSA}{ e as modificações ou adaptações sejam licenciadas sob termos idênticos}{}.%
    }%
  }%
  \renewcommand*{\HdrWrng}{Inserir Cabeçalho\\(\LengthTo*{cm}{\HFRuleWd}~cm \texttimes\ \LengthTo*{cm}{\TopLine}~cm)}%
  \renewcommand*{\LogoWrng}{Inserir Logo}%
  \renewcommand*{\SDGStmpWrng}{Inserir Selo ODS}%
  \renewcommand*{\SrcCall}{Fonte}%
  \renewcommand*{\TtlPgName}{Página de Título}%
  \renewcommand*{\AcronymsListName}{Lista de Abreviaturas e Siglas}%
  \renewcommand*{\SymbolsListName}{Lista de Símbolos}%
  \renewcommand*{\flowchartname}{Fluxograma}%
  \renewcommand*{\photographname}{Fotografia}%
  \renewcommand*{\graphname}{Gráfico}%
  \renewcommand*{\tabframedname}{Quadro}%
  \renewcommand*{\listfigurename}{Lista de Ilustrações}%
  \Crefname{flowchart}{Fluxograma}{Fluxogramas}%
  \crefname{flowchart}{Flux.}{Fluxs.}%
  \Crefname{photograph}{Fotografia}{Fotografias}%
  \crefname{photograph}{Fot.}{Fots.}%
  \Crefname{graph}{Gráfico}{Gráficos}%
  \crefname{graph}{Gráf.}{Gráfs.}%
  \Crefname{tabframed}{Quadro}{Quadros}%
  \crefname{tabframed}{Quad.}{Quads.}%
  \Crefname{annex}{Anexo}{Anexos}%
  \crefname{annex}{Anexo}{Anexos}%
  \forcsvlist{\SectAutoRefName}{section, subsection, subsubsection, paragraph, subparagraph}%
}
%%%% Definitions in English
\csappto{captionsenglish}{\renewcommand*{\contentsname}{Summary}}
\csappto{extrasenglish}{%
  \renewcommand*{\MECName}{Ministry of Education}%
  \renewcommand*{\UTFPRName}{Federal University of Technology \textemdash\ Paraná}%
  \renewcommand*{\BRName}{Brazil}%
  \renewcommand*{\CityCall}{City}%
  \renewcommand*{\InstDeptEx}{Department, Coordination, Program or Course}%
  \renewcommand*{\FullNameCall}{Author Full Name}%
  \renewcommand*{\KWCall}{Keywords}%
  \renewcommand*{\RcvdCall}{Received}%
  \renewcommand*{\AppdCall}{Approved}%
  \renewcommand*{\CCLicCall}{Copyright}%
  \renewcommand*{\CCLicDescr}{%
    \ifbool{@LayoutA}{%
      This article is licensed under a %
      \href{\CCLicURL}{%
        Creative Commons Attribution%
        \ifbool{@CCLicNC}{\csuse{textendash}Non\-Com\-mer\-cial}{}%
        \ifbool{@CCLicND}{\csuse{textendash}No\-De\-riv\-a\-tives}{}%
        \ifbool{@CCLicSA}{\csuse{textendash}Share\-Alike}{} %
        4.0 International License%
      }.%
    }{%
      This is an open access document under the terms of the %
      \href{\CCLicURL}{%
        Creative Commons Attribution%
        \ifbool{@CCLicNC}{\csuse{textendash}Non\-Com\-mer\-cial}{}%
        \ifbool{@CCLicND}{\csuse{textendash}No\-De\-riv\-a\-tives}{}%
        \ifbool{@CCLicSA}{\csuse{textendash}Share\-Alike}{}%
        \ifbool{@DocLicCC}{ (CC BY\MakeUppercase{\CCLicAcr{-}})}{} %
        4.0 International License%
      }, %
      which permits use and distribution in any medium or format, %
      provided that the original work is properly cited%
      \ifbool{@CCLicNC}{\ifboolexpr{ bool {@CCLicND} or bool {@CCLicSA} }{,}{ and} use is non-commercial}{}%
      \ifbool{@CCLicND}{\ifbool{@CCLicNC}{,}{} and no modification or adaptation is made}{}%
      \ifbool{@CCLicSA}{\ifbool{@CCLicNC}{,}{} and the modifications or adaptations are licensed under identical terms}{}.%
    }%
  }%
  \renewcommand*{\HdrWrng}{Insert Header\\(\LengthTo*{cm}{\HFRuleWd}~cm \texttimes\ \LengthTo*{cm}{\TopLine}~cm)}%
  \renewcommand*{\LogoWrng}{Insert Logo}%
  \renewcommand*{\SDGStmpWrng}{Insert SDG Stamp}%
  \renewcommand*{\SrcCall}{Source}%
  \renewcommand*{\TtlPgName}{Title Page}%
  \renewcommand*{\AcronymsListName}{List of Abbreviations and Initials}%
  \renewcommand*{\SymbolsListName}{List of Symbols}%
  \renewcommand*{\flowchartname}{Flowchart}%
  \renewcommand*{\photographname}{Photograph}%
  \renewcommand*{\graphname}{Graph}%
  \renewcommand*{\tabframedname}{Frame}%
  \renewcommand*{\listfigurename}{List of Illustrations}%
  \Crefname{flowchart}{Flowchart}{Flowcharts}%
  \crefname{flowchart}{Flow.}{Flows.}%
  \Crefname{photograph}{Photograph}{Photographs}%
  \crefname{photograph}{Phot.}{Phots.}%
  \Crefname{graph}{Graph}{Graphs}%
  \crefname{graph}{Graph}{Graphs}%
  \Crefname{tabframed}{Frame}{Frames}%
  \crefname{tabframed}{Frame}{Frames}%
  \Crefname{annex}{Annex}{Annexes}%
  \crefname{annex}{Annex}{Annexes}%
  \forcsvlist{\SectAutoRefName}{section, subsection, subsubsection, paragraph, subparagraph}%
}

%% Definições de comandos
\newcommand*{\MakeIcon}[2][\faQuestionCircle]{%
  \ifdraft{%
    \ifblank{#1}{\faQuestionCircle}{#1}%
  }{%
    \ifblank{#2}{}{\XeTeXLinkBox{\includegraphics[height = \fontcharht\font`A]{#2}}}%
  }%
}
\newcommand*{\HRef}[2]{\ifblank{#1}{}{\href{#1}{\ifblank{#2}{#1}{#2}}}}
\newcommand*{\ORCIDURL}{https://orcid.org/}
\newcommand*{\ORCIDFull}[1]{\HRef{\ORCIDURL#1}{\ifbool{@AffilIconOn}{\MakeIcon{orcid}~}{}\ORCIDURL#1}}
\newcommand*{\ORCIDShort}[1]{\HRef{\ORCIDURL#1}{\ifbool{@AffilIconOn}{\MakeIcon{orcid}~}{\ORCIDURL}#1}}
\newcommand*{\ORCIDIcon}[1]{\HRef{\ORCIDURL#1}{~\MakeIcon{orcid}}}
\newcommand*{\LattesURL}{http://lattes.cnpq.br/}
\newcommand*{\LattesFull}[1]{\HRef{\LattesURL#1}{\ifbool{@AffilIconOn}{\MakeIcon{lattes}~}{}\LattesURL#1}}
\newcommand*{\LattesShort}[1]{\HRef{\LattesURL#1}{\ifbool{@AffilIconOn}{\MakeIcon{lattes}~}{\LattesURL}#1}}
\newcommand*{\LattesIcon}[1]{\HRef{\LattesURL#1}{~\MakeIcon{lattes}}}
\newcommand*{\email}[1]{\ifblank{#1}{}{\href{mailto:#1}{\ifbool{@AffilIconOn}{\faEnvelope~}{}#1}}}
\newcommand*{\emailIcon}[1]{\ifblank{#1}{}{\href{mailto:#1}{~\faEnvelope}}}
\newcommand*{\Affil}[1]{\ifblank{#1}{}{\ifbool{@AffilIconOn}{\faUniversity~}{}#1}}
\newcommand*{\@DOIName}{}
\newcommand*{\DOIName}[1]{\ifblank{#1}{}{\renewcommand*{\@DOIName}{#1}}}
\newcommand*{\CCLicAcr}[1]{%
  \ifbool{@CCLicNC}{#1nc}{}%
  \ifbool{@CCLicND}{#1nd}{}%
  \ifbool{@CCLicSA}{#1sa}{}%
}
\newcommand*{\CCLicLogo}{\href{\CCLicURL}{\XeTeXLinkBox{\includegraphics[height = 4.5ex]{cc-by\CCLicAcr{-}}}}}
\newcommand*{\CCLicURL}{http://creativecommons.org/licenses/by\CCLicAcr{-}/4.0/}
\newcommand*{\LinkIcon}{\textsuperscript{\fontsize{1.2ex}{1.2ex}\selectfont\faExternalLinkSquare*}}
\newcommand*{\SourceOrNote}[2][\SrcCall]{%
  \ifblank{#2}{}{%
    \begingroup%
    \ifblank{#1}{\booltrue{@SourceLeft}}{}%
    \ifbool{@SourceLeft}{%
      \captionsetup{%
        format          = hang,%
        justification   = justified,%
        singlelinecheck = false,%
      }%
    }{}%
    \caption*{\ifblank{#1}{}{#1: }#2}%
    \endgroup%
  }%
}
\newcommand*{\SDGStmpA}{}
\newcommand*{\SDGStmpB}{}
\newcommand*{\SDGStmpC}{}
\newcommand*{\SDGStamps}[3]{%
  \ifblank{#1}{}{\renewcommand*{\SDGStmpA}{#1}}%
  \ifblank{#2}{}{\renewcommand*{\SDGStmpB}{#2}}%
  \ifblank{#3}{}{\renewcommand*{\SDGStmpC}{#3}}%
}
\newcommand*{\s@LengthTo}[2]{\strip@pt\dimexpr\ifdimless{#2}{\z@}{-#2}{#2}*65536/\dimexpr1#1\relax}
\newcommand*{\@LengthTo}[2]{\strip@pt\dimexpr#2*65536/\dimexpr1#1\relax}
\newcommand*{\LengthTo}{\@ifstar{\s@LengthTo}{\@LengthTo}}
%%%% Evento
\define@key{Event}{Name}{\ifblank{#1}{}{\csdef{EvntName}{#1}}}
\define@key{Event}{Acronym}{\ifblank{#1}{}{\csdef{EvntAcr}{#1}}}
\define@key{Event}{Date}{\ifblank{#1}{}{\csdef{EvntDate}{#1}}}
\define@key{Event}{Local}{\ifblank{#1}{}{\csdef{EvntLocal}{#1}}}
\define@key{Event}{Logo}{\ifblank{#1}{}{\csdef{EvntLogo}{#1}}}
\define@key{Event}{Header}{\ifblank{#1}{}{\csdef{EvntHdr}{#1}}}
\define@key{Event}{URL}{\ifblank{#1}{}{\csdef{EvntURL}{#1}}}
\csletcs{KV@Event@name}{KV@Event@Name}
\csletcs{KV@Event@acronym}{KV@Event@Acronym}
\csletcs{KV@Event@date}{KV@Event@Date}
\csletcs{KV@Event@local}{KV@Event@Local}
\csletcs{KV@Event@logo}{KV@Event@Logo}
\csletcs{KV@Event@header}{KV@Event@Header}
\csletcs{KV@Event@url}{KV@Event@URL}
\newcommand*{\EventInfo}[1]{%
  \ifblank{#1}{}{%
    \setkeys{Event}{%
      Name    = {},%
      Acronym = {},%
      Date    = {},%
      Local   = {},%
      Logo    = {},%
      Header  = {},%
      URL     = {},%
      #1,%
    }%
    \ifcsvoid{EvntName}{%
      \csundef{EvntAcr}%
      \csundef{EvntDate}%
      \csundef{EvntLocal}%
      \csundef{EvntLogo}%
      \csundef{EvntHdr}%
      \csundef{EvntURL}%
    }{}%
  }%
}
%%%% Instituição
\define@key{Institution}{Campus}{\ifblank{#1}{}{\csdef{InstCmps}{#1}}}
\define@key{Institution}{Department}{\ifblank{#1}{}{\csdef{InstDept}{#1}}}
\define@key{Institution}{DeptLogo}{\ifblank{#1}{}{\csdef{InstDeptLogo}{#1}}}
\csletcs{KV@Institution@campus}{KV@Institution@Campus}
\csletcs{KV@Institution@department}{KV@Institution@Department}
\csletcs{KV@Institution@deptlogo}{KV@Institution@DeptLogo}
\newcommand*{\InstitutionInfo}[1]{%
  \ifblank{#1}{}{%
    \setkeys{Institution}{%
      Campus     = {},%
      Department = {},%
      DeptLogo   = {},%
      #1,%
    }%
    \ifcsvoid{InstCmps}{%
      \csundef{InstDept}%
      \csundef{InstDeptLogo}%
    }{}%
  }%
}
%%%% Title
\newcommand*{\Title}[2]{%
  \ifblank{#1}{}{%
    \csdef{@Title}{#1}%
    \csappto{extrasbrazilian}{\csdef{@Title}{#1}}%
  }%
  \ifblank{#2}{}{\csappto{extrasenglish}{\csdef{@Title}{#2}}}%
}
\Title{%
  \ifbool{@LayoutA}{%
    O título deve conter até 70 caracteres sem espaço, não deve conter caracteres especiais ou símbolos. %
    Utilize caixa baixa como neste exemplo e letra maiúscula somente quando necessário%
  }{%
    Espaços Métricos - Capítulo 1
  }%
}{%
  \ifbool{@LayoutA}{%
    Title in English, follow the same format as the title in Portuguese%
  }{%
    The title of the work must be in lower case and contain up to two lines without a period%
  }%
}
%%%% Data(s)
\newcommand*{\YearNum}{\number\year}
\newcommand*{\RcvdDate}{}
\newcommand*{\AppdDate}{}
\newcommand*{\Dates}[3][]{%
  \ifblank{#1}{\renewcommand*{\YearNum}{}}{\renewcommand*{\YearNum}{#1}}%
  \ifblank{#2}{\renewcommand*{\RcvdDate}{}}{\renewcommand*{\RcvdDate}{#2}}%
  \ifblank{#3}{\renewcommand*{\AppdDate}{}}{\renewcommand*{\AppdDate}{#3}}%
}
\csletcs{Date}{date}
\AtBeginDocument{\Date{\AppdDate}}
%%%% Autor(es) e palavras-chave
\newcommand{\MakeList}[4][]{%
  \ifboolexpr{ test {\ifcsundef{the#3Ctr}} or test {\ifcsundef{the#3Num}} or test {\ifcsundef{the#3Tmp}} }{}{%
    \setcounter{#3Tmp}{\ifnumgreater{\value{#3Num}}{#2}{#2}{\value{#3Num}}}%
    \@whilenum\value{#3Ctr}<\value{#3Tmp}\do{%
      \stepcounter{#3Ctr}%
      \ifblank{#1}{}{\csdef{#1}{#3\Alph{#3Ctr}}}%
      #4%
    }%
    \ifblank{#1}{}{\csundef{#1}}%
    \setcounter{#3Ctr}{0}%
    \setcounter{#3Tmp}{0}%
  }%
}
\newcommand*{\Attrib@Num@Ex}[3][1]{%
  \ifboolexpr{ test {\ifcsundef{the#2Ctr}} or test {\ifcsundef{the#2Num}} }{}{%
    \setcounter{#2Num}{\ifblank{#1}{1}{#1}}%
    \@whilenum\value{#2Ctr}<\value{#2Num}\do{%
      \stepcounter{#2Ctr}%
      #3%
    }%
    \setcounter{#2Ctr}{0}%
  }%
}
%%%%%% Autor(es)
\newcounter{AuthCtr}
\newcounter{AuthNum}
\newcounter{AuthTmp}
\define@key{Author}{Name}{\ifcsvoid{ATag}{}{\ifblank{#1}{}{\csdef{\csuse{ATag}Name}{#1}}}}
\define@key{Author}{Email}{\ifcsvoid{ATag}{}{\ifblank{#1}{}{\csdef{\csuse{ATag}Email}{#1}}}}
\define@key{Author}{Lattes}{\ifcsvoid{ATag}{}{\ifblank{#1}{}{\csdef{\csuse{ATag}Lattes}{#1}}}}
\define@key{Author}{ORCID}{\ifcsvoid{ATag}{}{\ifblank{#1}{}{\csdef{\csuse{ATag}ORCID}{#1}}}}
\define@key{Author}{Affiliation}{\ifcsvoid{ATag}{}{\ifblank{#1}{}{\csdef{\csuse{ATag}Affil}{#1}}}}
\define@key{Author}{Role}{\ifcsvoid{ATag}{}{\ifblank{#1}{}{\csdef{\csuse{ATag}Role}{#1}}}}
\csletcs{KV@Author@name}{KV@Author@Name}
\csletcs{KV@Author@email}{KV@Author@Email}
\csletcs{KV@Author@lattes}{KV@Author@Lattes}
\csletcs{KV@Author@orcid}{KV@Author@ORCID}
\csletcs{KV@Author@affiliation}{KV@Author@Affiliation}
\csletcs{KV@Author@role}{KV@Author@Role}
\newcommand*{\Author}[2]{%
  \ifboolexpr{ test {\ifcsundef{theAuthNum}} or test {\ifcsundef{theAuthTmp}} }{}{%
    \ifblank{#2}{}{%
      \setcounter{AuthTmp}{#1}%
      \csdef{ATag}{Auth\Alph{AuthTmp}}%
      \setkeys{Author}{%
        Name        = {},%
        Email       = {},%
        Lattes      = {},%
        ORCID       = {},%
        Affiliation = {},%
        Role        = {},%
        #2,%
      }%
      \ifnumless{\value{AuthNum}}{\value{AuthTmp}}{\setcounter{AuthNum}{\value{AuthTmp}}}{}%
      \setcounter{AuthTmp}{0}%
      \csundef{ATag}%
    }%
  }%
}
\newcommand*{\AuthorsNumber}[1][1]{%
  \Attrib@Num@Ex[#1]{Auth}{%
    \Author{\value{AuthCtr}}{%
      Name        = {\FullNameCall-A\arabic{AuthCtr}},%
      Email       = {author\arabic{AuthCtr}@domain},%
      Affiliation = {\UTFPRName, \CityCall, Paraná, \BRName},%
    }%
  }%
}
\AuthorsNumber%
%%%%%% Palavras-chave
\newcounter{KWCtr}
\newcounter{KWNum}
\newcounter{KWTmp}
\newcommand*{\KWCallFrmt}{\bfseries\MakeUppercase}
\newcommand*{\KeywordsCallFormat}[1]{\renewcommand*{\KWCallFrmt}{\ifblank{#1}{}{#1}}}
\newcommand*{\Keyword}[3]{%
  \ifboolexpr{ test {\ifcsundef{theKWNum}} or test {\ifcsundef{theKWTmp}} }{}{%
    \setcounter{KWTmp}{#1}%
    \csdef{KW\Alph{KWTmp}}{}%
    \cseappto{extrasbrazilian}{\csdef{KW\Alph{KWTmp}}{}}%
    \cseappto{extrasenglish}{\csdef{KW\Alph{KWTmp}}{}}%
    \ifblank{#2}{}{%
      \csdef{KW\Alph{KWTmp}}{#2}%
      \cseappto{extrasbrazilian}{\csdef{KW\Alph{KWTmp}}{#2}}%
    }%
    \ifblank{#3}{}{%
      \cseappto{extrasenglish}{\csdef{KW\Alph{KWTmp}}{#3}}%
    }%
    \ifnumless{\value{KWNum}}{\value{KWTmp}}{\setcounter{KWNum}{\value{KWTmp}}}{}%
    \setcounter{KWTmp}{0}%
  }%
}
\newcommand*{\KeywordsList}[3][]{%
  \MakeList{5}{KW}{%
    \ifcsvoid{KW\Alph{KWCtr}}{}{%
      {#1{\csuse{KW\Alph{KWCtr}}}}%
      \ifnumless{\value{KWCtr}}{\value{KWTmp}}{#2}{#3}%
    }%
  }%
}
\newcommand*{\KeywordsNumber}[1][3]{%
  \Attrib@Num@Ex[#1]{KW}{%
    \Keyword{\value{KWCtr}}{palavra-chave-\arabic{KWCtr}}{keyword-\arabic{KWCtr}}%
  }%
}
\KeywordsNumber%

%% Texto
\geometry{%
  top          = 35mm,%
  left         = \ifbool{@LayoutA}{10mm}{20mm},%
  right        = 20mm,%
  bottom       = 25mm,%
  head         = 25mm,%
  headsep      = 5mm,%
  footskip     = 5mm,%
  marginpar    = 10mm,%
  marginparsep = 2.5mm,%
}
\setlength{\parindent}{\ifbool{@LayoutA}{7mm}{12.5mm}}
\setlength{\parskip}{\ifbool{@LayoutA}{6\p@\@plus\p@}{\z@\@plus\p@}}
\newcommand*{\Add@Period}[1]{\ifblank{#1}{}{#1\@addpunct{.}}}
\newcommand*{\LessSloppy}{%
  \setlength{\emergencystretch}{3em}%
  \hbadness\@M%
}
\csgappto{Centering}{%
  \sloppy%
  \hbadness\@M%
  \hyphenpenalty\@M%
  \exhyphenpenalty\@M%
}
\newrobustcmd*{\ENLangIt}[1]{\foreignlanguage{english}{\textit{#1}}}
\newrobustcmd*{\ENLangNoIt}[1]{\foreignlanguage{english}{#1}}
\newrobustcmd*{\ENLang}{\@ifstar{\ENLangIt}{\ENLangNoIt}}
\iflanguage{english}{}{\frenchspacing}
\ifboolexpr{ bool {XeTeX} or test {\ifdraft} }{\LessSloppy}{}

%% Cabeçalhos e rodapés
\newcounter{StmpCtr}
\newlength{\TopLine}
\newlength{\BottomLine}
\setlength{\TopLine}{-\topmargin-\headheight-1in}
\setlength{\BottomLine}{\paperheight-\textheight-\topmargin-\headheight-\headsep-\footskip-1in}
\dimdef{\HFRuleWd}{\ifbool{@RuleWidthText}{\textwidth}{\paperwidth}}
\dimdef{\HFRuleSkip}{\ifbool{@RuleWidthText}{\oddsidemargin+1in}{\z@}}
\newsavebox{\HFRuleBox}
\savebox{\HFRuleBox}{{\color{DocColor}\hskip\HFRuleSkip\rule{\HFRuleWd}{0.5\p@}}}
\AddToShipoutPictureFG{%
  \normalcolor%
  \ifcsvoid{EvntHdr}{}{%
    \AtPageUpperLeft{%
      \raisebox{-\height}{%
        \hskip\HFRuleSkip%
        \ifcsstring{EvntHdr}{example-image}{%
          \setlength{\fboxsep}{\z@}%
          \setkeys{draftfigure}{content = {\faFileImage{\\}\HdrWrng}, size = {tiny}}%
          \colorbox{gray!25!white}{\includegraphics[width = \HFRuleWd, height = 30mm, draft]{\EvntHdr}}%
        }{%
          \includegraphics[width = \HFRuleWd, height = 30mm]{\EvntHdr}%
        }%
      }%
    }%
  }%
  \ifbool{@RuleWidthZero}{}{%
    \AtPageUpperLeft{\raisebox{\TopLine}{\usebox{\HFRuleBox}}}%
    \AtPageLowerLeft{\raisebox{\BottomLine}{\usebox{\HFRuleBox}}}%
  }%
}
\newcommand*{\PrintEventLogo}{%
  \ifcsvoid{EvntLogo}{}{%
    \ifcsstring{EvntLogo}{example-image}{%
      \setlength{\fboxsep}{\z@}%
      \setkeys{draftfigure}{content = {\faFileImage{\\}\LogoWrng}, size = {tiny}}%
      \colorbox{gray!25!white}{\includegraphics[width = 25mm, height = 15mm, draft]{\EvntLogo}}%
    }{%
      \includegraphics[height = 15mm]{\EvntLogo}%
    }%
  }%
}
\newcommand*{\PrintSDGStamps}[1][0.05\BottomLine]{%
  \@whilenum\value{StmpCtr}<3\do{%
    \stepcounter{StmpCtr}%
    \ifcsvoid{SDGStmp\Alph{StmpCtr}}{}{%
      \ifcsstring{SDGStmp\Alph{StmpCtr}}{example-image}{%
        \begingroup%
        \setlength{\fboxsep}{\z@}%
        \setkeys{draftfigure}{content = {\faFileImage{\\}\SDGStmpWrng{\\}\arabic{StmpCtr}}, size = {tiny}}%
        \csdef{SDGStmpX}{\csuse{SDGStmp\Alph{StmpCtr}}-\alph{StmpCtr}}%
        \colorbox{gray!25!white}{\includegraphics[width = 0.9\BottomLine, height = 0.9\BottomLine, draft]{\SDGStmpX}}%
        \csundef{SDGStmpX}%
        \endgroup%
      }{%
        \includegraphics[width = 0.9\BottomLine, height = 0.9\BottomLine]{\csuse{SDGStmp\Alph{StmpCtr}}}%
      }%
      \hskip#1%
    }%
  }%
  \setcounter{StmpCtr}{0}%
}
\renewcommand*{\headrule}{}
\fancypagestyle{TitlePage}{%
  \fancyhf{}%
  \fancyhead[L]{%
    \ifcsvoid{EvntName}{%
      \begin{minipage}[t]{\textwidth}%
      \begin{minipage}[b][15mm][c]{35mm}%
      \raggedright%
      \includegraphics[height = 12mm]{utfpr}%
      \end{minipage}%
      \ifcsvoid{InstDeptLogo}{{\color{UTFPRBlack}\vrule\@width0.5\p@}\hskip6\p@}{\ifbool{@LayoutA}{\hfill}{}}%
      \begin{minipage}[b][15mm][c]{100mm}%
      \ifcsvoid{InstDeptLogo}{}{\centering}\IXptFS\sffamily%
      \MECName\vskip-\p@%
      {\bfseries\UTFPRName}\vskip-\p@%
      Campus \ifcsvoid{InstCmps}{\CityCall}{\InstCmps}\vskip-\p@%
      \ifcsvoid{InstDept}{\InstDeptEx}{\InstDept}%
      \end{minipage}%
      \ifcsvoid{InstDeptLogo}{}{%
        \ifbool{@LayoutA}{\hfill}{}%
        \begin{minipage}[b][15mm][c]{35mm}%
        \raggedleft%
        \ifcsstring{InstDeptLogo}{example-image}{%
          \setlength{\fboxsep}{\z@}%
          \setkeys{draftfigure}{content = {\faFileImage{\\}\LogoWrng}, size = {tiny}}%
          \colorbox{gray!25!white}{\includegraphics[width = 32.2mm, height = 12mm, draft]{example-image}}%
        }{%
          \includegraphics[height = 12mm]{\InstDeptLogo}%
        }%
        \end{minipage}%
      }%
      \vskip2\p@%
      {\color{UTFPRBlack}\hrule\@height0.5\p@}\vskip\p@%
      {\color{UTFPRYellow}\hrule\@height0.5\p@}%
      \end{minipage}%
    }{%
      \makebox[\z@][l]{\PrintEventLogo}%
      \begin{minipage}[b]{\textwidth}%
      \ifbool{@LayoutA}{\color{DocColor}}{\color{AGray}}\raggedleft\footnotesize\EvntName%
      \ifcsvoid{EvntDate}{}{{\\}\EvntDate}%
      \ifcsvoid{EvntLocal}{}{{\\}\EvntLocal}%
      \end{minipage}%
    }%
    \vskip\z@\VIIptFS\strut%
  }%
  \fancyfoot[L]{%
    \vskip2\p@%
    \begin{minipage}[b]{\textwidth}%
    \ifbool{@LayoutA}{%
      \raisebox{-0.75\BottomLine}{\PrintSDGStamps}%
      \ifbool{@PageNumOn}{\hfill\color{DocColor}\VIIptFS\pagename\ \textbar\ \thepage}{}%
    }{%
      \colorlet{LinkColor}{\ifbool{@LinkDarkBlue}{ADarkBlue!25!AGray}{AGray}}%
      \color{AGray}%
      \ifboolexpr{ bool {@DocLicCCStd} or bool {@DocLicCC} }{%
        \vskip2\p@%
        \IXptFS\sffamily%
        \ifbool{@DocLicCCStd}{%
          \parbox[b][4.5ex][t]{12.9ex}{\CCLicLogo}\hskip1ex%
          \parbox[b][4.5ex][t]{\textwidth-13.9ex}{\CCLicDescr}%
        }{}%
        \ifbool{@DocLicCC}{\CCLicDescr}{}%
      }{%
        \footnotesize\ifcsvoid{EvntURL}{}{\url{\EvntURL}}\ifbool{@PageNumOn}{\hfill\thepage}{}%
      }%
    }%
    \end{minipage}%
  }%
}
\fancypagestyle{plain}{}
\fancyhf{}
\fancyhead[L]{%
  \begin{minipage}[b]{\textwidth}%
  \ifbool{@LayoutA}{\color{DocColor}}{\color{AGray}}\VIIptFS\PDF@Authors{\\}\@Title%
  \end{minipage}%
  \vskip\z@\VIIptFS\strut%
}
\fancyfoot[L]{%
  \vskip2\p@%
  \begin{minipage}[b]{\textwidth}%
  \ifbool{@LayoutA}{%
    \colorlet{LinkColor}{\ifbool{@LinkDarkBlue}{ADarkBlue!25!DocColor}{DocColor}}%
    \color{DocColor}\VIIptFS\ifcsvoid{EvntURL}{}{\url{\EvntURL}}\ifbool{@PageNumOn}{\hfill\pagename\ \textbar\ \thepage}{}%
  }{%
    \colorlet{LinkColor}{\ifbool{@LinkDarkBlue}{ADarkBlue!25!AGray}{AGray}}%
    \color{AGray}\footnotesize\ifcsvoid{EvntURL}{}{\url{\EvntURL}}\ifbool{@PageNumOn}{\hfill\thepage}{}%
  }%
  \end{minipage}%
}
\pagestyle{fancy}

%% Seções
\setcounter{secnumdepth}{\ifbool{@SectNumOn}{5}{0}}
\gluedef{\BSSkip}{-12\p@\@plus-4\p@\@minus-4\p@}
\gluedef{\ASSkip}{\ifbool{@LayoutA}{6\p@\@plus2\p@\@minus2\p@}{12\p@\@plus4\p@\@minus4\p@}}
\crefalias{paragraph}{section}
\crefalias{subparagraph}{section}
\RenewDocumentCommand{\section}{ s O{#3} m O{} }{%
  \IfBooleanTF{#1}{%
    \@startsection{section}{1}%
      {\z@}{-\BSSkip}{\ASSkip}%
      {\ifbool{@SectUnnumLeft}{}{\centering}\color{DocColor}\bfseries}%
      *{\MakeUppercase{#3}}%
    \renewcommand*{\@currentlabelname}{#3}%
    \ifblank{#4}{}{%
      \label{#4}%
      \addcontentsline{toc}{section}{\numberlinespace#3}%
    }%
  }{%
    \@startsection{section}{1}%
      {\z@}{-\BSSkip}{\ASSkip}%
      {\color{DocColor}\bfseries}%
      [#2]{\MakeUppercase{#3}}%
  }%
}
\RenewDocumentCommand{\subsection}{ s O{#3} m }{%
  \IfBooleanTF{#1}{%
    \@startsection{subsection}{2}%
      {\z@}{-\BSSkip}{\ASSkip}%
      {\color{DocColor}}%
      *{\MakeUppercase{#3}}%
    \renewcommand*{\@currentlabelname}{#3}%
  }{%
    \@startsection{subsection}{2}%
      {\z@}{-\BSSkip}{\ASSkip}%
      {\color{DocColor}}%
      [#2]{\MakeUppercase{#3}}%
  }%
}
\renewcommand*{\subsubsection}{\@startsection{subsubsection}{3}{\z@}{-\BSSkip}{\ASSkip}{\color{DocColor}}}
\renewcommand*{\paragraph}{\@startsection{paragraph}{4}{\z@}{-\BSSkip}{\ASSkip}{\color{DocColor}}}
\renewcommand*{\subparagraph}{\@startsection{subparagraph}{5}{-\parindent}{-\BSSkip}{\ASSkip}{\color{DocColor}\emph}}
\NewDocumentEnvironment{InfoSection}{ m O{} }{%
  \bigskip%
  \ifblank{#2}{}{%
    \pdfbookmark[1]{#1}{#2}%
    \hypertarget{#2}{}%
    \csgdef{#2ref}{\hyperlink{#2}{#1}}%
  }%
  \noindent%
  \begin{minipage}{\textwidth}%
  \setlength{\parindent}{\ifbool{@LayoutA}{7mm}{12.5mm}}%
  \noindent{\color{DocColor}\bfseries#1}%
  \vskip\ASSkip%
  \ignorespaces%
}{%
  \end{minipage}%
  \ignorespacesafterend%
}

%% Listas de itens
\AtBeginEnvironment{itemize}{\LessSloppy}
\AtBeginEnvironment{enumerate}{\LessSloppy}
\setlist{%
  topsep     = \z@,%
  partopsep  = \z@,%
  parsep     = \z@,%
  itemsep    = \z@,%
  leftmargin = *,%
  align      = left,%
}
\setlist[1]{labelindent = \parindent}
\newcommand*{\alphsect}{\alph*^^29}
\renewcommand*{\@listI}{%
  \leftmargin\leftmargini%
  \topsep\z@%
  \parsep\z@%
  \itemsep\z@%
}

%% Notas de rodapé
\setlength{\footnotemargin}{1em}
\csletcs{old@footnotetext}{@footnotetext}
\renewcommand*{\@footnotetext}[1]{\old@footnotetext{\Add@Period{\LessSloppy#1}}}
\renewcommand*{\footnoterule}{\kern-3\p@\hrule\@width50mm\kern2.5\p@}
\renewcommand*{\@makefntext}[1]{%
  \setlength{\hangindent}{1em}%
  \makebox[1em][l]{\@makefnmark}\Add@Period{\LessSloppy#1}%
}
\csletcs{old@makefntext}{@makefntext}
\cspreto{@thanks}{\csletcs{@makefntext}{old@makefntext}}
\csletcs{old@footnote}{footnote}
\newcommand*{\ufootnote}[2][\faExclamationTriangle]{%
  \begingroup%
  \csletcs{@makefnmark}{relax}%
  \renewcommand*{\thefootnote}{\ifblank{#1}{}{#1}}%
  \renewcommand*{\@makefntext}[1]{%
    \setlength{\hangindent}{1em}%
    \makebox[1em][l]{\ifcsvoid{thefootnote}{}{\textsuperscript{\thefootnote}}}\Add@Period{\LessSloppy#2}%
  }%
  {\old@footnote{#2}}%
  \addtocounter{footnote}{-1}%
  \endgroup%
}

%% Citação direta: de até 3 linhas e com mais de 3 linhas
\dimdef{\CitLeftSkip}{40mm}
\NewDocumentCommand{\Citation}{ O{\languagename} m m O{} }{%
  \hyphenblockquote{#1}[%
    \ignorespaces\ifblank{#2}{}{#2}\ifblank{#4}{}{\footnote{#4}}\unskip%
  ]{%
    \ignorespaces\ifcsstring{languagename}{#1}{#3}{\textit{#3}}\unskip%
  }%
}
\NewDocumentEnvironment{DisplayCitation}{ O{\languagename} m O{} }{%
  \begin{hyphendisplayquote}{#1}[%
    \ifblank{#2}{}{\ignorespaces#2\unskip}%
    \ifblank{#3}{}{\footnote{\ignorespaces#3\unskip}}\@addpunct{.}%
  ]%
  \begingroup%
  \ifcsstring{languagename}{#1}{}{\itshape}%
}{%
  \endgroup%
  \end{hyphendisplayquote}%
}
\newenvironment*{DisplayCitationBlock}{%
  \vskip\parskip%
  \list{}{\setlength{\leftmargin}{\z@}}%
  \item%
  \LessSloppy%
  \ifbool{@twocolumn}{%
    \addtolength{\leftskip}{0.25\linewidth}%
  }{%
    \addtolength{\leftskip}{\CitLeftSkip}%
  }%
  \ifcsstring{@ptsize}{2}{\footnotesize}{\small}%
}{%
  \endlist%
}
\renewcommand*{\mkcitation}[1]{\ifblank{#1}{}{ #1}}
\SetBlockThreshold{\ifbool{@LayoutA}{2}{3}}
\SetBlockEnvironment{DisplayCitationBlock}

%% Equações
\AtBeginDocument{%
  \setlength{\abovedisplayskip}{-6\p@\@plus-2\p@\@minus-2\p@}%
  \setlength{\belowdisplayskip}{6\p@\@plus2\p@\@minus2\p@}%
  \setlength{\abovedisplayshortskip}{\abovedisplayskip}%
  \setlength{\belowdisplayshortskip}{\belowdisplayskip}%
}
\ifbool{@fleqn}{\setlength{\mathindent}{\ifbool{@LayoutA}{5mm}{7.5mm}}}{}
\ifbool{@FontArial}{%
  \csletcs{mathrm@mathsf}{mathsf}%
}{%
  \csletcs{mathrm@mathsf}{mathrm}%
}
\newrobustcmd*{\Unit}[2][]{%
  \ifbool{mmode}{%
    \mathrm@mathsf{\ifblank{#1}{}{#1\,}#2}%
  }{%
    \ensuremath{\mathrm@mathsf{\ifblank{#1}{}{#1\,}#2}}%
  }%
}
\newrobustcmd*{\MathBF}[1]{%
  \ifboolexpr{ bool {LuaTeX} or bool {XeTeX} }{%
    \begingroup%
    \ifbool{@FontArial}{%
      \csletcs{mathrm@mathsf}{symbfsf}%
    }{%
      \csletcs{mathrm@mathsf}{symbfup}%
    }%
    \ifbool{mmode}{\symbf{#1}}{\ensuremath{\symbf{#1}}}%
    \endgroup%
  }{%
    \ifbool{mmode}{\text{\boldmath\ensuremath{#1}}}{{\boldmath\ensuremath{#1}}}%
  }%
}

%% Objetos flutuantes: figuras, tabelas, etc.
\graphicspath{{./Headers/}{./Illustrations/}{./Logos/}{./SGDStamps/}}
\arrayrulecolor{DocColor}
\setlength{\textfloatsep}{12\p@\@plus4\p@\@minus4\p@}
\setlength{\intextsep}{12\p@\@plus4\p@\@minus4\p@}
\setlength{\floatsep}{12\p@\@plus4\p@\@minus4\p@}
\setlength{\aboverulesep}{\z@}
\setlength{\belowrulesep}{\z@}
\setlength{\extrarowheight}{0.25ex}
\setlength{\arrayrulewidth}{\lightrulewidth}
\newcolumntype{?}[1]{!{\color{DocColor}\vrule\@width\ifblank{#1}{\heavyrulewidth}{#1}}}
\newcolumntype{e}[1]{@{\extracolsep{\ifblank{#1}{\fill}{#1}}}}
\newcolumntype{Y}{>{\centering\arraybackslash}X}
\newcolumntype{Z}{>{\raggedleft\arraybackslash}X}
\DeclareFloatingEnvironment[fileext = low, name = \flowchartname]{flowchart}
\DeclareFloatingEnvironment[fileext = lop, name = \photographname]{photograph}
\DeclareFloatingEnvironment[fileext = loh, name = \graphname]{graph}
\DeclareFloatingEnvironment[fileext = lod, name = \tabframedname]{tabframed}
\newcommand*{\Flt@Fmt}[1]{%
  \RenewDocumentEnvironment{#1}{ O{} O{\linewidth} }{%
    \csuse{@float}{#1}[##1]%
    \ifbool{@LayoutA}{\begin{addmargin}[50mm]{0mm}}{}%
    \ifblank{##2}{}{\setlength{\CaptionWidth}{##2}}%
    \centering%
    \begin{minipage}{\CaptionWidth}%
    \centering\ifcsstring{@ptsize}{2}{\footnotesize}{\small}%
  }{%
    \end{minipage}%
    \ifbool{@LayoutA}{\end{addmargin}}{}%
    \csuse{end@float}%
  }%
}
\forcsvlist{\Flt@Fmt}{figure, flowchart, photograph, graph, tabframed, table}
%%%% Legendas
\newlength{\CaptionWidth}
\setlength{\CaptionWidth}{\linewidth}
\newcommand*{\SetCaptionWidth}[1]{%
  \ifblank{#1}{}{%
    \setlength{\CaptionWidth}{#1}%
    \captionsetup{width = \CaptionWidth}%
  }%
}
\captionsetup{%
  labelsep      = endash,%
  justification = centerlast,%
  font          = {small, bf},%
  skip          = 2\p@,%
}
\ifbool{@CaptionLeft}{%
  \captionsetup{%
    format          = hang,%
    justification   = justified,%
    singlelinecheck = false,%
  }%
}{}
\ifcsstring{@ptsize}{2}{\captionsetup{font = {footnotesize, bf}}}{}

%% Citações e referências
\setlength{\bibitemsep}{12\p@\@plus4\p@\@minus4\p@}
\DeclareLanguageMapping{brazilian}{brazilian-abnt}
\DeclareLanguageMapping{english}{english-abnt}
\DeclareLanguageMappingSuffix{}
\NewBibliographyString{%
  sheettotal,%
  sheettotals,%
  sineloco,%
  sinenomine,%
}
\DefineBibliographyStrings{brazilian}{%
  sineloco    = {s\adddot~l\adddot},%
  sinenomine  = {s\adddot~n\adddot},%
}
\DefineBibliographyStrings{english}{%
  sheettotal  = {s\adddot},%
  sheettotals = {s\adddot},%
  sineloco    = {s\adddot~l\adddot},%
  sinenomine  = {s\adddot~n\adddot},%
}
\xpatchbibmacro{in:}{%
  \bibstring{in}%
}{%
  \mkbibemph{\bibstring{in}}%
}{}{}
\xpatchbibmacro{name:andothers}{%
  \bibstring{andothers}%
}{%
  \mkbibemph{\bibstring{andothers}}%
}{}{}
\xpatchbibmacro{location}{%
  \bibstring{sineloco}%
}{%
  \mkbibemph{\bibstring{sineloco}}%
}{}{}
\xpatchbibmacro{venue}{%
  \bibstring{sineloco}%
}{%
  \mkbibemph{\bibstring{sineloco}}%
}{}{}
\xpatchbibmacro{publisher}{%
  \bibstring{sinenomine}%
}{%
  \mkbibemph{\bibstring{sinenomine}}%
}{}{}
\xpatchbibmacro{publisher+location+date}{%
  \bibstring{sineloco}%
  \setunit{\addcolon\addnbspace}%
  \bibstring{sinenomine}%
}{%
  \mkbibemph{\bibstring{sineloco}}%
  \setunit{\addcolon\addnbspace}%
  \mkbibemph{\bibstring{sinenomine}}%
}{}{}
\xpatchbibmacro{publisher+location+issue+date}{%
  \bibstring{sineloco}%
  \setunit{\addcolon\addnbspace}%
  \bibstring{sinenomine}%
}{%
  \mkbibemph{\bibstring{sineloco}}%
  \setunit{\addcolon\addnbspace}%
  \mkbibemph{\bibstring{sinenomine}}%
}{}{}
\ifbool{@ABNTCitNRB}{%
  \csletcs{multinamedelim}{multinamedelimorig}%
  \csletcs{finalnamedelim}{finalnamedelimorig}%
}{%
  \xpatchbibmacro{textcite}{%
    \ifnumequal{\value{textcitecount}}{\value{textcitetotal}-1}{%
      \finalnamedelim%
    }{%
      \multinamedelim%
    }%
  }{%
    \textcitedelim%
  }{}{}%
}
\ifbool{@ABNTCitNSB}{%
  \global\csletcs{mkbibparens}{mkbibbrackets}%
  \global\csletcs{bibopenparen}{bibopenbracket}%
  \global\csletcs{bibcloseparen}{bibclosebracket}%
  \DeclareFieldFormat{labelnumberwidth}{\mkbibbrackets{#1}}%
}{}
\DeclareFieldFormat{doi}{%
  \ifbool{@BibDOIIcon}{\MakeIcon{doi}\addnbspace}{}\mkbibacro{DOI}\addcolon\space%
  \ifhyperref{\href{https://doi.org/#1}{\nolinkurl{#1}}}{\nolinkurl{#1}}%
}
\DeclareFieldFormat{url}{%
  \ifbool{@BibURLIcon}{\faExternalLinkSquare*\addnbspace\mkbibacro{URL}}{\bibstring{urlfrom}}\addcolon\space%
  \url{#1}%
}
\defbibheading{bibliography}[\refname]{%
  \section*{#1}%
  \label{sect:ref}%
}
\csappto{printbibliography}{\addcontentsline{toc}{section}{\numberlinespace\refname}}

%% Resumo: idiomas primário e secundário
\newlength{\AbstractMargin}
\setlength{\AbstractMargin}{\z@}
\newcommand*{\AbstractText}[2]{%
  \ifblank{#1}{}{%
    \csgdef{AbstrText}{#1}%
    \csgappto{extrasbrazilian}{\csgdef{AbstrText}{#1}}%
  }%
  \ifblank{#2}{}{\csgappto{extrasenglish}{\csgdef{AbstrText}{#2}}}%
}
\NewEnviron{Abstract}[1][]{%
  \ifblank{#1}{%
    \iflanguage{brazilian}{%
      \global\csletcs{AbstrBody}{BODY}%
      \AbstractText{\AbstrBody}{}%
    }{}%
    \iflanguage{english}{%
      \global\csletcs{FrgnAbstrBody}{BODY}%
      \AbstractText{}{\FrgnAbstrBody}%
    }{}%
  }{%
    \ifstrequal{#1}{brazilian}{%
      \global\csletcs{AbstrBody}{BODY}%
      \AbstractText{\AbstrBody}{}%
    }{}%
    \ifstrequal{#1}{english}{%
      \global\csletcs{FrgnAbstrBody}{BODY}%
      \AbstractText{}{\FrgnAbstrBody}%
    }{}%
  }%
}
\AbstractText{\lipsum[1]}{\lipsum[2]}

%% Página de título
\ifpatchable*{\and}{%
  \xpatchcmd{\and}{%
    \hskip 1em \@plus.17fil%
  }{%
    \hskip\z@\@plus0fil%
  }{}{}%
}{}
\csletcs{old@thanks}{thanks}
\renewcommand*{\thanks}[1]{\begingroup\csletcs{rlap}{relax}\old@thanks{#1}\endgroup}
%%%% Leiaute A
\newcommand*{\@maketitleA}{%
  \pdfbookmark[1]{\TtlPgName}{ttlpg}%
  \thispagestyle{TitlePage}%
  \begingroup%
  \raggedleft%
  \parbox{130mm}{\raggedleft\VIIptFS\ifcsvoid{EvntURL}{\null}{\url{\EvntURL}}}\vskip10\p@%
  \begin{minipage}{130mm}%
  \iflanguage{brazilian}{\selectlanguage{brazilian}}{\selectlanguage{english}}%
  \raggedright\XVptFS\bfseries\@Title%
  \end{minipage}%
  \vskip10\p@%
  \begin{minipage}{130mm}%
  \iflanguage{brazilian}{\selectlanguage{english}}{\selectlanguage{brazilian}}%
  \raggedright\XVptFS\bfseries\@Title%
  \end{minipage}%
  \vskip10\p@%
  \begin{minipage}[t][\z@][t]{45mm}%
  \vskip20\p@%
  \raggedright\VIIptFS\sffamily%
  \MakeList[ATag]{8}{Auth}{%
    \ifcsvoid{\csuse{ATag}Name}{}{%
      {\bfseries\csuse{\csuse{ATag}Name}}%
      \ifcsvoid{\csuse{ATag}Email}{}{\par\email{\csuse{\csuse{ATag}Email}}}%
      \ifcsvoid{\csuse{ATag}Lattes}{}{\par\LattesShort{\csuse{\csuse{ATag}Lattes}}}%
      \ifcsvoid{\csuse{ATag}ORCID}{}{\par\ORCIDShort{\csuse{\csuse{ATag}ORCID}}}%
      \ifcsvoid{\csuse{ATag}Affil}{}{\par\Affil{\csuse{\csuse{ATag}Affil}}}%
      \ifnumless{\value{AuthCtr}}{\value{AuthTmp}}{\vskip5\p@}{\vskip10\p@}%
    }%
  }%
  \ifcsvoid{@DOIName}{}{%
    \ifbool{@AffilIconOn}{}{{\color{DocColor}\bfseries DOI:}}%
    \href{https://www.doi.org/\@DOIName}{\ifbool{@AffilIconOn}{\MakeIcon{doi}}{}~\@DOIName}\par%
  }%
  \ifcsvoid{RcvdDate}{}{{\color{DocColor}\bfseries\RcvdCall:} \RcvdDate.\par}%
  \ifcsvoid{AppdDate}{}{{\color{DocColor}\bfseries\AppdCall:} \AppdDate.\par}%
  \ifboolexpr{ bool {@DocLicCCStd} or bool {@DocLicCC} }{%
    {\color{DocColor}\bfseries\CCLicCall:} \CCLicDescr\par%
    \CCLicLogo%
  }{}%
  \end{minipage}%
  \hfill%
  \begin{minipage}[t][\z@][t]{130mm}%
  \begin{minipage}[t]{\linewidth}%
  \iflanguage{brazilian}{\selectlanguage{brazilian}}{\selectlanguage{english}}%
  \parbox[t]{\linewidth}{\centering\color{DocColor}\bfseries\MakeUppercase{\abstractname}}\vskip10\p@%
  \parbox[t]{\linewidth}{\small\AbstrText}\vskip6\p@%
  \parbox[t]{\linewidth}{\small{\color{DocColor}\KWCallFrmt{\KWCall}:} \KeywordsList{; }{.}}%
  \end{minipage}%
  \vskip10\p@%
  \begin{minipage}[t]{\linewidth}%
  \iflanguage{brazilian}{\selectlanguage{english}}{\selectlanguage{brazilian}}%
  \parbox[t]{\linewidth}{\centering\color{DocColor}\bfseries\MakeUppercase{\abstractname}}\vskip10\p@%
  \parbox[t]{\linewidth}{\small\AbstrText}\vskip6\p@%
  \parbox[t]{\linewidth}{\small{\color{DocColor}\KWCallFrmt{\KWCall}:} \KeywordsList{; }{.}}%
  \end{minipage}%
  \end{minipage}%
  \endgroup%
  \clearpage%
}
%%%% Leiaute B
\newcommand*{\@maketitleB}{%
  \newpage%
  \pdfbookmark[1]{\TtlPgName}{ttlpg}%
  \begin{Center}%
  \csletcs{footnote}{thanks}%
  \begingroup%
  \iflanguage{brazilian}{\selectlanguage{brazilian}}{\selectlanguage{english}}%
  \large\bfseries\@title%
  \ifboolexpr{ test {\ifcsvoid{@DOIName}} and test {\ifcsvoid{RcvdDate}} and test {\ifcsvoid{AppdDate}} }{}{%
    \ufootnote[\faInfoCircle]{%
      \ifcsvoid{@DOIName}{}{%
        \ifbool{@AffilIconOn}{}{\textbf{DOI:} }%
        \href{https://www.doi.org/\@DOIName}{\ifbool{@AffilIconOn}{\MakeIcon{doi}~}{}\@DOIName}%
        \ifboolexpr{ test {\ifcsvoid{RcvdDate}} and test {\ifcsvoid{AppdDate}} }{}{. }%
      }%
      \ifcsvoid{RcvdDate}{}{\textbf{\RcvdCall:} \RcvdDate\ifcsvoid{AppdDate}{}{. }}%
      \ifcsvoid{AppdDate}{}{\textbf{\AppdCall:} \AppdDate}%
    }%
  }%
  \endgroup%
  \vskip\baselineskip%
  \vskip\baselineskip%
  \begingroup%
  \normalsize%
  \setlength{\lineskip}{0.5em}%
  \begin{tabular}[t]{c}%
  \@author%
  \end{tabular}%
  \endgroup%
  \end{Center}%
}

%% Inicialização do documento
\AtBeginDocument{%
  \newrobustcmd*{\@Authors}{%
    \MakeList[ATag]{\ifbool{@LayoutA}{8}{16}}{Auth}{%
      \csuse{\csuse{ATag}Name}%
      \ifbool{@LayoutA}{}{%
        \ifcsvoid{\csuse{ATag}Affil}{}{%
          \thanks{%
            \ifcsvoid{\csuse{ATag}Role}{}{\csuse{\csuse{ATag}Role}.\ }%
            \Affil{\csuse{\csuse{ATag}Affil}}%
            \ifcsvoid{\csuse{ATag}Email}{}{.\ \email{\csuse{\csuse{ATag}Email}}}%
            \ifcsvoid{\csuse{ATag}Lattes}{}{.\ \LattesShort{\csuse{\csuse{ATag}Lattes}}}%
            \ifcsvoid{\csuse{ATag}ORCID}{}{.\ \ORCIDShort{\csuse{\csuse{ATag}ORCID}}}%
          }%
        }%
      }%
      \ifnumless{\value{AuthCtr}}{\value{AuthTmp}}{,\and}{}%
    }%
  }%
  \newrobustcmd*{\PDF@Authors}{}%
  \MakeList[ATag]{\ifbool{@LayoutA}{8}{16}}{Auth}{%
    \csxappto{PDF@Authors}{%
      \csuse{\csuse{ATag}Name}%
      \ifnumless{\value{AuthCtr}}{\value{AuthTmp}}{, }{}%
    }%
  }%
  \newrobustcmd*{\PDF@Keywords}{}%
  \MakeList{5}{KW}{%
    \csxappto{PDF@Keywords}{%
      \csuse{KW\Alph{KWCtr}}%
      \ifnumless{\value{KWCtr}}{\value{KWTmp}}{, }{}%
    }%
  }%
  \title{\@Title}%
  \author{\@Authors}%
  \hypersetup{%
    pdftitle    = {\@title},%
    pdfauthor   = {\PDF@Authors},%
    pdfsubject  = {\ifcsvoid{EvntAcr}{UTFPR \YearNum}{\EvntAcr}},%
    pdfkeywords = {\PDF@Keywords},%
  }%
  \ifbool{@LayoutA}{%
    \csletcs{@maketitle}{@maketitleA}%
  }{%
    \csletcs{@maketitle}{@maketitleB}%
    \csgappto{maketitle}{\thispagestyle{TitlePage}}%
  }%
  \maketitle%
  \ifbool{@LayoutA}{\begin{addmargin}[50mm]{0mm}}{}%
}

%% Listas: ilustrações; tabelas
\csletcs{listsfontsize}{relax}
\newcommand*{\L@Flt@Fmt}[1]{%
  \csdef{l@#1}{%
    \savebox0{\csuse{#1name}~\csuse{the#1}\space\textendash\space}%
    \renewcommand*{\numberline}[1]{\makebox[\wd0][l]{\csuse{#1name}~####1\hfill\textendash\hfill}}%
    \@dottedtocline{1}{\z@}{\wd0}%
  }%
  \AtBeginDocument{\addtocontents{\csuse{ext@#1}}{\setlength{\parskip}{\z@\@plus\p@}\listsfontsize\bfseries}}%
}
\forcsvlist{\L@Flt@Fmt}{figure, flowchart, photograph, graph, tabframed, table}
\newcommand*{\bffloatpnum}[2]{%
  \ifboolexpr{%
    test {\ifcsequal{l@#1}{l@figure}} or %
    test {\ifcsequal{l@#1}{l@flowchart}} or %
    test {\ifcsequal{l@#1}{l@photograph}} or %
    test {\ifcsequal{l@#1}{l@graph}} or %
    test {\ifcsequal{l@#1}{l@tabframed}} or %
    test {\ifcsequal{l@#1}{l@table}}%
  }{\bfseries}{}#2%
}
%%%% Lista de ilustrações
\cspreto{listoffigures}{\pdfbookmark[1]{\listfigurename}{lof}}
\newcommand*{\@StartToC}[1]{\@starttoc{#1}}
\ifpatchable*{\listoffigures}{%
  \xpatchcmd{\listoffigures}{%
    \@starttoc{lof}%
  }{%
    \ifbool{@LayoutA}{\medskip}{}%
    \forcsvlist{\@StartToC}{lof, low, lop, loh, lod}%
  }{}{}%
}{}
%%%% Lista de tabelas
\cspreto{listoftables}{\pdfbookmark[1]{\listtablename}{lot}}
\ifpatchable*{\listoftables}{%
  \xpatchcmd{\listoftables}{%
    \@starttoc{lot}%
  }{%
    \ifbool{@LayoutA}{\medskip}{}%
    \@starttoc{lot}%
  }{}{}%
}{}

%% Listas: abreviaturas e siglas; símbolos
\newcommand*{\AcronymsListLabelFont}[1]{\normalfont#1}
\newenvironment*{AcronymsList}[1][]{%
  \pdfbookmark[1]{\ifblank{#1}{\AcronymsListName}{#1}}{acr}%
  \section*{\ifblank{#1}{\AcronymsListName}{#1}}%
  \label{acr}%
  \begingroup%
  \listsfontsize%
  \setlength{\parindent}{\z@}%
  \begin{description}[%
    style         = multiline,%
    font          = \AcronymsListLabelFont,%
    leftmargin    = 0.125\linewidth,%
    listparindent = -\leftmargin,%
  ]%
}{%
  \end{description}%
  \endgroup%
}
\newcommand*{\SymbolsListLabelFont}[1]{\ensuremath{#1}}
\newenvironment*{SymbolsList}[1][]{%
  \pdfbookmark[1]{\ifblank{#1}{\SymbolsListName}{#1}}{sym}%
  \section*{\ifblank{#1}{\SymbolsListName}{#1}}%
  \label{sym}%
  \begingroup%
  \listsfontsize%
  \setlength{\parindent}{\z@}%
  \begin{description}[%
    style         = multiline,%
    font          = \SymbolsListLabelFont,%
    leftmargin    = 0.125\linewidth,%
    listparindent = -\leftmargin,%
  ]%
}{%
  \end{description}%
  \endgroup%
}

%% Sumário
\setcounter{tocdepth}{5}
\dimdef{\ToCNumWd}{%
  \ifnumequal{\c@tocdepth}{1}{1.5em}{}%
  \ifnumequal{\c@tocdepth}{2}{2.3em}{}%
  \ifnumequal{\c@tocdepth}{3}{3.2em}{}%
  \ifnumequal{\c@tocdepth}{4}{4.1em}{}%
  \ifnumequal{\c@tocdepth}{5}{5.0em}{}%
}
\csletcs{old@contentsline}{contentsline}
\newcommand*{\numberlinespace}{\ifnumgreater{\value{secnumdepth}}{0}{\texorpdfstring{\protect\numberline{}}{}}{}}
\newcommand*{\bfsect}[2]{\ifcsequal{l@#1}{l@section}{\bfseries}{}#2}
\newcommand*{\itsect}[2]{\ifcsequal{l@#1}{l@subparagraph}{\textit{#2}}{#2}}
\renewcommand*{\contentsline}[3]{%
  \ifboolexpr{%
    test {\ifcsequal{l@#1}{l@section}} or %
    test {\ifcsequal{l@#1}{l@subsection}}%
  }{%
    \expandafter\@firstoftwo%
  }{%
    \expandafter\@secondoftwo%
  }%
  {\old@contentsline{#1}{\bfsect{#1}{\MakeUppercase{#2}}}{\bfsect{#1}{#3}}}%
  {\old@contentsline{#1}{\itsect{#1}{#2}}{\itsect{#1}{\bffloatpnum{#1}{#3}}}}%
}
\renewcommand*{\l@section}{\@dottedtocline{1}{\z@}{\ToCNumWd}}
\renewcommand*{\l@subsection}{\@dottedtocline{2}{\z@}{\ToCNumWd}}
\renewcommand*{\l@subsubsection}{\@dottedtocline{3}{\z@}{\ToCNumWd}}
\renewcommand*{\l@paragraph}{\@dottedtocline{4}{\z@}{\ToCNumWd}}
\renewcommand*{\l@subparagraph}{\@dottedtocline{5}{\z@}{\ToCNumWd}}
\cspreto{tableofcontents}{\pdfbookmark[1]{\contentsname}{toc}}
\ifpatchable*{\tableofcontents}{%
  \xpatchcmd{\tableofcontents}{%
    \@starttoc{toc}%
  }{%
    \ifbool{@LayoutA}{\medskip}{}%
    \@starttoc{toc}%
  }{}{}%
}{}
\AtBeginDocument{\addtocontents{toc}{\setlength{\parskip}{\z@\@plus\p@}\listsfontsize}}

%% Glossário
\newenvironment*{Glossary}[1][\normalfont]{%
  \csdef{GlossaryLabelFont}##1{#1{##1}:}%
  \phantomsection%
  \section*{\glossaryname}%
  \label{gly}%
  \addcontentsline{toc}{section}{\numberlinespace\MakeUppercase{\glossaryname}}%
  \setlength{\parindent}{\z@}%
  \begin{description}[%
    style         = unboxed,%
    font          = \GlossaryLabelFont,%
    leftmargin    = \ifbool{@LayoutA}{7mm}{12.5mm},%
    listparindent = -\leftmargin,%
    labelsep      = 0.25em,%
  ]%
}{%
  \end{description}%
}

%% Apêndices e anexos
\newcommand*{\annexname}{\Cref@annex@name}
\newcommand*{\apx@sect@fmt}[1]{%
  \csletcs{old@#1}{#1}%
  \csdef{apx@#1}##1{%
    \refstepcounter{#1}%
    \csuse{old@#1}*{\ApxOrAnxName\ \csuse{the#1} \textemdash\ ##1}%
    \addcontentsline{toc}{#1}{\numberlinespace\ApxOrAnxName\ \csuse{the#1} \textemdash\ ##1}%
  }%
}
\forcsvlist{\apx@sect@fmt}{section, subsection, subsubsection, paragraph, subparagraph}
\newcommand*{\let@apx@sect}[1]{\csletcs{#1}{apx@#1}}
\newcommand*{\crefalias@sect}[1]{\crefalias{#1}{\Hy@appendixstring}}
\newcommand*{\Hy@param@chk}[1]{\ifcsstring{Hy@param}{#1}{\csletcs{Hy@param}{Hy@appendixstring}}{}}
\newenvironment*{Appendix}[1][appendix]{%
  \appendix%
  \csgdef{ApxOrAnxName}{\csuse{Cref@#1@name}}%
  \csletcs{sectionautorefname}{Cref@#1@name}%
  \forcsvlist{\let@apx@sect}{section, subsection, subsubsection, paragraph, subparagraph}%
  \renewcommand*{\Hy@appendixstring}{#1}%
  \renewcommand*{\Hy@chapapp}{\Hy@appendixstring}%
  \forcsvlist{\crefalias@sect}{appendix, subappendix, subsubappendix, subsubsubappendix, paragraph, subparagraph}%
  \ifpatchable*{\hyper@makecurrent}{%
    \xpatchcmd{\hyper@makecurrent}{%
      \ifx\Hy@param\Hy@chapterstring\let\Hy@param\Hy@chapapp\fi%
    }{%
      \forcsvlist{\Hy@param@chk}{chapter, section, subsection, subsubsection, paragraph, subparagraph}%
    }{}{}%
  }{}%
  \phantomsection%
  \renewcommand*{\@currentlabelname}{\csuse{Cref@#1@name@plural}}%
  \label{sect:#1}%
}{}
\newenvironment*{Annex}{%
  \begin{Appendix}[annex]%
}{%
  \end{Appendix}%
}

%% Finalização do documento
\cspreto{enddocument}{\ifbool{@LayoutA}{\end{addmargin}}{}}
